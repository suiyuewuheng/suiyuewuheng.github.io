<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[软链接与硬链接]]></title>
    <url>%2F2018%2F09%2F10%2F%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5%2F</url>
    <content type="text"><![CDATA[概述 在Linux系统中,内核为每一个新创建的文件分配一个Inode(索引结点),每个文件都有一个惟一的inode号。文件属性保存在索引结点里，在访问文件时，索引结点被复制到内存在，从而实现文件的快速访问。链接是一种在共享文件和访问它的用户的若干目录项之间建立联系的一种方法。Linux中包括两种链接：硬链接(Hard Link)和软链接(Soft Link),软链接又称为符号链接（Symbolic link）。符号连接相当于Windows下的快捷方式。 硬链接 语法： ln src-file dst-file 硬链接说白了是一个指针，指向文件索引节点，系统并不为它重新分配inode。可以用:ln命令来建立硬链接 123456789101112131415mkdir new &amp;&amp; echo &quot;this is new file&quot; &gt; new/own.filecd /newln own.file &gt; hardls -l[root@suiyuewuheng new]# ls -ltotal 8-rw-r--r-- 2 root root 17 Sep 10 11:27 hard-rw-r--r-- 2 root root 17 Sep 10 11:27 own.file[root@suiyuewuheng new]# cat hard this is new file[root@suiyuewuheng new]# rm -rf *[root@suiyuewuheng new]# mkdir file.dr[root@suiyuewuheng new]# ln file.dir file.dir.handln: failed to access ‘file.dir’: No such file or directory[root@suiyuewuheng new]# 从上我们可以看到，两个文件有相同的inode值和文件属性，它们指向的都是同一个区块，查看文件内容，两个文件也一模一样，说白了硬链接是一个指针，指向文件索引节点，系统并不为它重新分配inode，建立file的硬链接就是为file的文件索引节点在当前目录上建立一个新指针，删除其中任何一个文件，链接数会减一，当所有链接文件都被删除时（也就是当链接数减到零时），文件就会从磁盘上删除 硬链接不足： 不可以在不同文件系统的文件间建立链接 只有超级用户才可以为目录创建硬链接 不能为目录创建硬链接 软链接 语法：ls -s src.file dst.file 软链接类似windows下的快捷方式，它实际上是一个特殊的文件，在软连接中，软连接文件实际上就是一个文本文件，这个文件中包含有软链接指向另一个文件的文职信息内容，因此，通过访问这个“快捷方式”就可以迅速定位到软链接所指向的源文件实体。 12345678910111213[root@suiyuewuheng new]# touch file1[root@suiyuewuheng new]# ln -s file1 file1.soft[root@suiyuewuheng new]# mkdir file1.dir[root@suiyuewuheng new]# ln -s file1.dir file1.dir.soft[root@suiyuewuheng new]# ln file1.dir file1.dir.handln: ‘file1.dir’: hard link not allowed for directory[root@suiyuewuheng new]# ls -litotal 42490370 -rw-r--r-- 1 root root 0 Sep 10 12:22 file12490372 drwxr-xr-x 2 root root 4096 Sep 10 12:22 file1.dir2490373 lrwxrwxrwx 1 root root 9 Sep 10 12:23 file1.dir.soft -&gt; file1.dir2490371 lrwxrwxrwx 1 root root 5 Sep 10 12:22 file1.soft -&gt; file1[root@suiyuewuheng new]# 可以看到，软链接具有和源文件不同的inode节点值，它们是不同的文件，在文件属性上软链接明确写出了是链接文件，而硬链接没有写出来，因为在本质上硬链接文件和原文件是完全平等关系，第三列是文件链接数或者目录子目录数，file1.dir的目录子目录数没有增加，还是2，这个表示该目录下有两个子目录. 和 .. ,file1的文件链接数也咩有增加，第六列是文件大小，也不相同，file1是0B，而file1.soft是5B，这里的5B其实就是file1的大小，软链接可以指向目录，而硬链接不能指向目录。当删除源文件时，软链接文件随即消失。 总之，建立软链接就是建立了一个新文件。当访问链接文件时，系统就会发现他是个链接文件，它读取链接文件找到真正要访问的文件。 - [ ] 软链接不足 移动源文件，可能会导致软链接文件失效，无法找到源文件 消耗系统inode节点数和分配路径所需空间]]></content>
  </entry>
</search>
